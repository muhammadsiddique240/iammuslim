{% load static %}
<a href="{% url 'research:paper_detail' paper.slug %}" class="pdf-card group bg-white rounded-xl border border-islamic-gold shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden block">
    <!-- PDF Thumbnail/Header -->
    <div class="relative">
        {% if paper.has_pdf %}
            {% if paper.pdf_thumbnail_url %}
                <img src="{{ paper.pdf_thumbnail_url }}" 
                     alt="{{ paper.title }}" 
                     class="w-full h-48 object-cover">
            {% else %}
                <div class="w-full h-48 bg-gradient-to-br from-islamic-green to-islamic-blue flex items-center justify-center">
                    <div class="text-center text-white">
                        <svg class="w-16 h-16 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 2a2 2 0 00-2 2v8a2 2 0 002 2h6a2 2 0 002-2V6.414A2 2 0 0016.414 5L14 2.586A2 2 0 0012.586 2H9z"/>
                            <path d="M3 8a2 2 0 012-2v10h8a2 2 0 01-2 2H5a2 2 0 01-2-2V8z"/>
                        </svg>
                        <p class="text-sm font-medium">PDF Available</p>
                    </div>
                </div>
            {% endif %}
            
            <!-- Hover Overlay -->
            <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center">
                <div class="opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    <div class="inline-flex items-center px-4 py-2 bg-white text-islamic-green rounded-lg font-medium">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                        View PDF
                    </div>
                </div>
            </div>
        {% else %}
            <div class="w-full h-48 bg-gray-100 flex items-center justify-center">
                <div class="text-center text-gray-400">
                    <svg class="w-16 h-16 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    <p class="text-sm">No PDF</p>
                </div>
            </div>
        {% endif %}
    </div>

    <!-- Paper Info -->
    <div class="p-4">
        <h3 class="font-semibold text-lg text-islamic-green mb-2 line-clamp-2">{{ paper.title }}</h3>
        
        <div class="flex items-center text-sm text-gray-600 mb-3">
            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            {{ paper.author }}
        </div>

        {% if paper.published_at %}
            <div class="flex items-center text-sm text-gray-500 mb-3">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
                {{ paper.published_at|date:"F j, Y" }}
            </div>
        {% endif %}

        {% if paper.summary %}
            <p class="text-sm text-gray-600 mb-4 line-clamp-3">{{ paper.summary|truncatewords:20 }}</p>
        {% endif %}

        <!-- Action Buttons -->
        <div class="flex gap-2">
            <div class="flex-1 text-center px-3 py-2 bg-islamic-green text-white rounded-lg text-sm font-medium">
                Read More
            </div>
            {% if paper.has_pdf %}
                <div class="px-3 py-2 border border-islamic-gold text-islamic-green rounded-lg">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                </div>
            {% endif %}
        </div>
    </div>
</a>

<style>
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.pdf-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    text-decoration: none;
    color: inherit;
}

.pdf-card:hover {
    transform: translateY(-4px);
    text-decoration: none;
    color: inherit;
}

.pdf-card:hover h3 {
    color: var(--islamic-blue);
}
</style>
